// Generated by CoffeeScript 2.4.1
var Ball, COLORS, active, balls, clicked, createColors, createPair, draw, level, mousePressed, overlap, reset, setup;

COLORS = null;

level = 0;

active = 0;

balls = [];

clicked = [];

Ball = class Ball {
  constructor(radie1, x1, y1, col1) {
    this.radie = radie1;
    this.x = x1;
    this.y = y1;
    this.col = col1;
    this.active = true;
  }

  rita() {
    if (!this.active) {
      return;
    }
    sc(0);
    sw(4);
    fill(this.col);
    return circle(this.x, this.y, this.radie);
  }

  inside(mx, my) {
    if (!this.active) {
      return false;
    }
    return this.radie > dist(this.x, this.y, mx, my);
  }

};

reset = function(delta = 1) {
  var i, k, len, ref, results;
  COLORS = _.shuffle(COLORS);
  active = 0;
  balls = [];
  clicked = [];
  level += delta;
  if (level < 1) {
    level = 1;
  }
  ref = range(level);
  results = [];
  for (k = 0, len = ref.length; k < len; k++) {
    i = ref[k];
    results.push(createPair(COLORS[i]));
  }
  return results;
};

createColors = function(pattern) {
  var b, g, k, l, len, len1, len2, m, r, result;
  // _.flatten ('#'+r+g+b+'8' for r in pattern for g in pattern for b in pattern)
  result = [];
  for (k = 0, len = pattern.length; k < len; k++) {
    r = pattern[k];
    for (l = 0, len1 = pattern.length; l < len1; l++) {
      g = pattern[l];
      for (m = 0, len2 = pattern.length; m < len2; m++) {
        b = pattern[m];
        result.push('#' + r + g + b + '8');
      }
    }
  }
  return result;
};

setup = function() {
  createCanvas(windowWidth, windowHeight);
  COLORS = createColors('05af'); // 0f 08f 05af 58be 68ac
  textSize(100);
  textAlign(CENTER, CENTER);
  return reset(1);
};

draw = function() {
  var ball, k, len;
  bg(1);
  for (k = 0, len = balls.length; k < len; k++) {
    ball = balls[k];
    ball.rita();
  }
  fc(0);
  return text(level, width / 2, height / 2);
};

mousePressed = function() {
  var ball, candidates;
  candidates = (function() {
    var k, len, results;
    results = [];
    for (k = 0, len = balls.length; k < len; k++) {
      ball = balls[k];
      if (ball.inside(mouseX, mouseY)) {
        results.push(ball);
      }
    }
    return results;
  })();
  if (candidates.length !== 1) {
    return reset(-1);
  }
  active--;
  ball = candidates[0];
  ball.active = false;
  clicked.push(ball);
  if (clicked.length === 2) {
    if (active === 0) {
      return reset(1);
    }
    if (clicked[0].col !== clicked[1].col) {
      reset(-1);
    }
    return clicked = [];
  }
};

overlap = function(x, y) {
  var ball, k, len;
  for (k = 0, len = balls.length; k < len; k++) {
    ball = balls[k];
    if (0.5 * ball.radie > dist(ball.x, ball.y, x, y)) {
      return true;
    }
  }
  return false;
};

createPair = function(col) {
  var j, k, len, radie, ref, results, x, y;
  radie = int(1.5 * windowWidth / (3 + level));
  ref = range(2);
  results = [];
  for (k = 0, len = ref.length; k < len; k++) {
    j = ref[k];
    active++;
    while (true) {
      x = int(random(width));
      y = int(random(height));
      if (!overlap(x, y)) {
        break;
      }
    }
    results.push(balls.push(new Ball(radie, x, y, col)));
  }
  return results;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsSUFBQSxFQUFBLE1BQUEsRUFBQSxNQUFBLEVBQUEsS0FBQSxFQUFBLE9BQUEsRUFBQSxZQUFBLEVBQUEsVUFBQSxFQUFBLElBQUEsRUFBQSxLQUFBLEVBQUEsWUFBQSxFQUFBLE9BQUEsRUFBQSxLQUFBLEVBQUE7O0FBQUEsTUFBQSxHQUFTOztBQUNULEtBQUEsR0FBUTs7QUFDUixNQUFBLEdBQVM7O0FBQ1QsS0FBQSxHQUFROztBQUNSLE9BQUEsR0FBVTs7QUFFSixPQUFOLE1BQUEsS0FBQTtFQUNDLFdBQWMsT0FBQSxJQUFBLElBQUEsTUFBQSxDQUFBO0lBQUMsSUFBQyxDQUFBO0lBQU8sSUFBQyxDQUFBO0lBQUcsSUFBQyxDQUFBO0lBQUcsSUFBQyxDQUFBO0lBQVEsSUFBQyxDQUFBLE1BQUQsR0FBVTtFQUFwQzs7RUFDZCxJQUFPLENBQUEsQ0FBQTtJQUNOLElBQUcsQ0FBSSxJQUFDLENBQUEsTUFBUjtBQUFvQixhQUFwQjs7SUFDQSxFQUFBLENBQUcsQ0FBSDtJQUNBLEVBQUEsQ0FBRyxDQUFIO0lBQ0EsSUFBQSxDQUFLLElBQUMsQ0FBQSxHQUFOO1dBQ0EsTUFBQSxDQUFPLElBQUMsQ0FBQSxDQUFSLEVBQVUsSUFBQyxDQUFBLENBQVgsRUFBYSxJQUFDLENBQUEsS0FBZDtFQUxNOztFQU1QLE1BQVMsQ0FBQyxFQUFELEVBQUksRUFBSixDQUFBO0lBQ1IsSUFBRyxDQUFJLElBQUMsQ0FBQSxNQUFSO0FBQW9CLGFBQU8sTUFBM0I7O1dBQ0EsSUFBQyxDQUFBLEtBQUQsR0FBUyxJQUFBLENBQUssSUFBQyxDQUFBLENBQU4sRUFBUSxJQUFDLENBQUEsQ0FBVCxFQUFXLEVBQVgsRUFBYyxFQUFkO0VBRkQ7O0FBUlY7O0FBWUEsS0FBQSxHQUFRLFFBQUEsQ0FBQyxRQUFRLENBQVQsQ0FB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Q0FBQTtBQUNaLE1BQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsS0FBQSxFQUFBLEdBQUEsRUFBQSxPQUFBLEVBQUEsQ0FBQSxFQUFBO0VBQUEsS0FBQSxHQUFRLEdBQUEsQ0FBSSxHQUFBLEdBQU0sV0FBTixHQUFrQixDQUFDLENBQUEsR0FBRSxLQUFILENBQXRCO0FBQ1I7QUFBQTtFQUFBLEtBQUEscUNBQUE7O0lBQ0MsTUFBQTtBQUNBLFdBQUEsSUFBQTtNQUNDLENBQUEsR0FBSSxHQUFBLENBQUksTUFBQSxDQUFPLEtBQVAsQ0FBSjtNQUNKLENBQUEsR0FBSSxHQUFBLENBQUksTUFBQSxDQUFPLE1BQVAsQ0FBSjtNQUNKLElBQVMsQ0FBSSxPQUFBLENBQVEsQ0FBUixFQUFVLENBQVYsQ0FBYjtBQUFBLGNBQUE7O0lBSEQ7aUJBSUEsS0FBSyxDQUFDLElBQU4sQ0FBVyxJQUFJLElBQUosQ0FBUyxLQUFULEVBQWUsQ0FBZixFQUFpQixDQUFqQixFQUFtQixHQUFuQixDQUFYO0VBTkQsQ0FBQTs7QUFGWSIsInNvdXJjZXNDb250ZW50IjpbIkNPTE9SUyA9IG51bGxcclxubGV2ZWwgPSAwXHJcbmFjdGl2ZSA9IDBcclxuYmFsbHMgPSBbXVxyXG5jbGlja2VkID0gW11cclxuXHJcbmNsYXNzIEJhbGxcclxuXHRjb25zdHJ1Y3RvciA6IChAcmFkaWUsIEB4LCBAeSwgQGNvbCkgLT4gQGFjdGl2ZSA9IHRydWVcclxuXHRyaXRhIDogLT5cclxuXHRcdGlmIG5vdCBAYWN0aXZlIHRoZW4gcmV0dXJuXHJcblx0XHRzYyAwXHJcblx0XHRzdyA0XHJcblx0XHRmaWxsIEBjb2xcclxuXHRcdGNpcmNsZSBAeCxAeSxAcmFkaWVcclxuXHRpbnNpZGUgOiAobXgsbXkpIC0+XHJcblx0XHRpZiBub3QgQGFjdGl2ZSB0aGVuIHJldHVybiBmYWxzZVxyXG5cdFx0QHJhZGllID4gZGlzdCBAeCxAeSxteCxteVxyXG5cclxucmVzZXQgPSAoZGVsdGEgPSAxKSAtPlxyXG5cdENPTE9SUyA9IF8uc2h1ZmZsZSBDT0xPUlNcclxuXHRhY3RpdmUgPSAwXHJcblx0YmFsbHMgPSBbXVxyXG5cdGNsaWNrZWQgPSBbXVxyXG5cdGxldmVsICs9IGRlbHRhXHJcblx0aWYgbGV2ZWwgPCAxIHRoZW4gbGV2ZWwgPSAxXHJcblx0Zm9yIGkgaW4gcmFuZ2UgbGV2ZWxcclxuXHRcdGNyZWF0ZVBhaXIgQ09MT1JTW2ldXHJcblxyXG5jcmVhdGVDb2xvcnMgPSAocGF0dGVybikgLT5cclxuXHQjIF8uZmxhdHRlbiAoJyMnK3IrZytiKyc4JyBmb3IgciBpbiBwYXR0ZXJuIGZvciBnIGluIHBhdHRlcm4gZm9yIGIgaW4gcGF0dGVybilcclxuXHRyZXN1bHQgPSBbXVxyXG5cdGZvciByIGluIHBhdHRlcm5cclxuXHRcdGZvciBnIGluIHBhdHRlcm5cclxuXHRcdFx0Zm9yIGIgaW4gcGF0dGVyblxyXG5cdFx0XHRcdHJlc3VsdC5wdXNoICcjJytyK2crYisnOCdcclxuXHRyZXN1bHRcclxuXHJcbnNldHVwID0gLT5cclxuXHRjcmVhdGVDYW52YXMgd2luZG93V2lkdGgsd2luZG93SGVpZ2h0XHJcblx0Q09MT1JTID0gY3JlYXRlQ29sb3JzICcwNWFmJyAjIDBmIDA4ZiAwNWFmIDU4YmUgNjhhY1xyXG5cdHRleHRTaXplIDEwMFxyXG5cdHRleHRBbGlnbiBDRU5URVIsQ0VOVEVSXHJcblx0cmVzZXQgMVxyXG5cclxuZHJhdyA9IC0+XHJcblx0YmcgMVxyXG5cdGZvciBiYWxsIGluIGJhbGxzXHJcblx0XHRiYWxsLnJpdGEoKVxyXG5cdGZjIDBcclxuXHR0ZXh0IGxldmVsLHdpZHRoLzIsaGVpZ2h0LzJcclxuXHJcbm1vdXNlUHJlc3NlZCA9IC0+XHJcblx0Y2FuZGlkYXRlcyA9IChiYWxsIGZvciBiYWxsIGluIGJhbGxzIHdoZW4gYmFsbC5pbnNpZGUgbW91c2VYLG1vdXNlWSlcclxuXHRpZiBjYW5kaWRhdGVzLmxlbmd0aCAhPSAxIHRoZW4gcmV0dXJuIHJlc2V0IC0xXHJcblx0YWN0aXZlLS1cclxuXHRiYWxsID0gY2FuZGlkYXRlc1swXVxyXG5cdGJhbGwuYWN0aXZlID0gZmFsc2VcclxuXHRjbGlja2VkLnB1c2ggYmFsbFxyXG5cdGlmIGNsaWNrZWQubGVuZ3RoID09IDJcclxuXHRcdGlmIGFjdGl2ZSA9PSAwIHRoZW4gcmV0dXJuIHJlc2V0IDFcclxuXHRcdGlmIGNsaWNrZWRbMF0uY29sICE9IGNsaWNrZWRbMV0uY29sIHRoZW4gcmVzZXQgLTFcclxuXHRcdGNsaWNrZWQgPSBbXVxyXG5cclxub3ZlcmxhcCA9ICh4LHkpIC0+XHJcblx0Zm9yIGJhbGwgaW4gYmFsbHNcclxuXHRcdGlmIDAuNSAqIGJhbGwucmFkaWUgPiBkaXN0IGJhbGwueCxiYWxsLnkseCx5IHRoZW4gcmV0dXJuIHRydWVcclxuXHRmYWxzZVxyXG5cclxuY3JlYXRlUGFpciA9IChjb2wpIC0+XHJcblx0cmFkaWUgPSBpbnQgMS41ICogd2luZG93V2lkdGgvKDMrbGV2ZWwpXHJcblx0Zm9yIGogaW4gcmFuZ2UgMlxyXG5cdFx0YWN0aXZlKytcclxuXHRcdGxvb3BcclxuXHRcdFx0eCA9IGludCByYW5kb20gd2lkdGhcclxuXHRcdFx0eSA9IGludCByYW5kb20gaGVpZ2h0XHJcblx0XHRcdGJyZWFrIGlmIG5vdCBvdmVybGFwIHgseVxyXG5cdFx0YmFsbHMucHVzaCBuZXcgQmFsbCByYWRpZSx4LHksY29sIl19
//# sourceURL=c:\github\ColorPairCD\coffee\sketch.coffee