// Generated by CoffeeScript 2.4.1
var Ball, active, balls, clicked, createPair, draw, level, mousePressed, reset, setup;

level = 0;

active = 0;

clicked = [];

Ball = class Ball {
  constructor(radie1, x1, y1, col1) {
    this.radie = radie1;
    this.x = x1;
    this.y = y1;
    this.col = col1;
    this.active = true;
  }

  rita() {
    if (!this.active) {
      return;
    }
    fill(this.col);
    return circle(this.x, this.y, this.radie);
  }

  inside(mx, my) {
    if (!this.active) {
      return false;
    }
    return dist(this.x, this.y, mx, my) < this.radie;
  }

};

balls = [];

reset = function(delta = 1) {
  var i, k, len, ref;
  active = 0;
  balls = [];
  clicked = [];
  level += delta;
  console.log('reset', level);
  if (level < 1) {
    level = 1;
  }
  ref = range(level);
  for (k = 0, len = ref.length; k < len; k++) {
    i = ref[k];
    createPair(i);
  }
  return console.log(balls);
};

setup = function() {
  createCanvas(windowWidth, windowHeight);
  return reset(1);
};

draw = function() {
  var ball, i, k, l, len, len1, results;
  bg(0);
  for (k = 0, len = balls.length; k < len; k++) {
    ball = balls[k];
    ball.rita();
  }
  fc(1);
  textSize(16);
  text(`level ${level}`, 100, 25);
  text(`active ${active}`, 100, 50);
  results = [];
  for (i = l = 0, len1 = balls.length; l < len1; i = ++l) {
    ball = balls[i];
    results.push(text(JSON.stringify(ball), 100, 75 + i * 25));
  }
  return results;
};

mousePressed = function() {
  var ball, candidates;
  candidates = (function() {
    var k, len, results;
    results = [];
    for (k = 0, len = balls.length; k < len; k++) {
      ball = balls[k];
      if (ball.inside(mouseX, mouseY)) {
        results.push(ball);
      }
    }
    return results;
  })();
  if (candidates.length !== 1) {
    reset(-1);
  }
  active--;
  ball = candidates[0];
  ball.active = false;
  clicked.push(ball);
  console.log(`clicked.length ${clicked.length}`);
  if (clicked.length === 2) {
    if (active === 0) {
      reset(1);
      return;
    }
    if (clicked[0].col !== clicked[1].col) {
      reset(-1);
    }
    return clicked = [];
  }
};

createPair = function(i) {
  var col, j, k, len, radie, ref, results, x, y;
  radie = windowWidth / 4;
  col = "#f008 #0f08 #00f8 #ff08".split(' ');
  ref = range(2);
  results = [];
  for (k = 0, len = ref.length; k < len; k++) {
    j = ref[k];
    active++;
    x = int(random(width));
    y = int(random(height));
    results.push(balls.push(new Ball(radie, x, y, col[i])));
  }
  return results;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsSUFBQSxFQUFBLE1BQUEsRUFBQSxLQUFBLEVBQUEsT0FBQSxFQUFBLFVBQUEsRUFBQSxJQUFBLEVBQUEsS0FBQSxFQUFBLFlBQUEsRUFBQSxLQUFBLEVBQUE7O0FBQUEsS0FBQSxHQUFROztBQUNSLE1BQUEsR0FBUzs7QUFDVCxPQUFBLEdBQVU7O0FBRUosT0FBTixNQUFBLEtBQUE7RUFDQyxXQUFjLE9BQUEsSUFBQSxJQUFBLE1BQUEsQ0FBQTtJQUFDLElBQUMsQ0FBQTtJQUFPLElBQUMsQ0FBQTtJQUFHLElBQUMsQ0FBQTtJQUFHLElBQUMsQ0FBQTtJQUMvQixJQUFDLENBQUEsTUFBRCxHQUFVO0VBREc7O0VBRWQsSUFBTyxDQUFBLENBQUE7SUFDTixJQUFHLENBQUksSUFBQyxDQUFBLE1BQVI7QUFBb0IsYUFBcEI7O0lBQ0EsSUFBQSxDQUFLLElBQUMsQ0FBQSxHQUFOO1dBQ0EsTUFBQSxDQUFPLElBQUMsQ0FBQSxDQUFSLEVBQVUsSUFBQyxDQUFBLENBQVgsRUFBYSxJQUFDLENBQUEsS0FBZDtFQUhNOztFQUlQLE1BQVMsQ0FBQyxFQUFELEVBQUksRUFBSixDQUFBO0lBQ1IsSUFBRyxDQUFJLElBQUMsQ0FBQSxNQUFSO0FBQW9CLGFBQU8sTUFBM0I7O1dBQ0EsSUFBQSxDQUFLLElBQUMsQ0FBQSxDQUFOLEVBQVEsSUFBQyxDQUFBLENBQVQsRUFBVyxFQUFYLEVBQWMsRUFBZCxDQUFBLEdBQW9CLElBQUMsQ0FBQTtFQUZiOztBQVBWOztBQVdBLEtBQUEsR0FBUTs7QUFFUixLQUFBLEdBQVEsUUFBQSxDQUFDLFFBQVEsQ0FBVCxDQUFBO0FBQ1AsTUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQTtFQUFBLE1BQUEsR0FBUztFQUNULEtBQUEsR0FBUTtFQUNSLE9BQUEsR0FB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RUFKRCxDQUFBOztBQUpZIiwic291cmNlc0NvbnRlbnQiOlsibGV2ZWwgPSAwXHJcbmFjdGl2ZSA9IDBcclxuY2xpY2tlZCA9IFtdXHJcblxyXG5jbGFzcyBCYWxsXHJcblx0Y29uc3RydWN0b3IgOiAoQHJhZGllLCBAeCwgQHksIEBjb2wpIC0+XHJcblx0XHRAYWN0aXZlID0gdHJ1ZVxyXG5cdHJpdGEgOiAtPlxyXG5cdFx0aWYgbm90IEBhY3RpdmUgdGhlbiByZXR1cm4gXHJcblx0XHRmaWxsIEBjb2xcclxuXHRcdGNpcmNsZSBAeCxAeSxAcmFkaWVcclxuXHRpbnNpZGUgOiAobXgsbXkpIC0+IFxyXG5cdFx0aWYgbm90IEBhY3RpdmUgdGhlbiByZXR1cm4gZmFsc2VcclxuXHRcdGRpc3QoQHgsQHksbXgsbXkpIDwgQHJhZGllXHJcblxyXG5iYWxscyA9IFtdXHJcblxyXG5yZXNldCA9IChkZWx0YSA9IDEpIC0+XHJcblx0YWN0aXZlID0gMCBcclxuXHRiYWxscyA9IFtdXHJcblx0Y2xpY2tlZCA9IFtdXHJcblx0bGV2ZWwgKz0gZGVsdGFcclxuXHRjb25zb2xlLmxvZyAncmVzZXQnLGxldmVsXHJcblx0aWYgbGV2ZWwgPCAxIHRoZW4gbGV2ZWwgPSAxXHJcblx0Zm9yIGkgaW4gcmFuZ2UgbGV2ZWxcclxuXHRcdGNyZWF0ZVBhaXIgaVxyXG5cdGNvbnNvbGUubG9nIGJhbGxzXHJcblxyXG5zZXR1cCA9IC0+XHJcblx0Y3JlYXRlQ2FudmFzIHdpbmRvd1dpZHRoLHdpbmRvd0hlaWdodFxyXG5cdHJlc2V0IDFcclxuXHJcbmRyYXcgPSAtPlxyXG5cdGJnIDBcclxuXHRmb3IgYmFsbCBpbiBiYWxsc1xyXG5cdFx0YmFsbC5yaXRhKClcclxuXHRmYyAxXHJcblx0dGV4dFNpemUgMTZcclxuXHR0ZXh0IFwibGV2ZWwgI3tsZXZlbH1cIiwgMTAwLDI1XHJcblx0dGV4dCBcImFjdGl2ZSAje2FjdGl2ZX1cIiwgMTAwLDUwXHJcblx0Zm9yIGJhbGwsaSBpbiBiYWxsc1xyXG5cdFx0dGV4dCBKU09OLnN0cmluZ2lmeShiYWxsKSwxMDAsNzUraSoyNVxyXG5cclxubW91c2VQcmVzc2VkID0gLT5cclxuXHRjYW5kaWRhdGVzID0gKGJhbGwgZm9yIGJhbGwgaW4gYmFsbHMgd2hlbiBiYWxsLmluc2lkZSBtb3VzZVgsbW91c2VZKVxyXG5cdGlmIGNhbmRpZGF0ZXMubGVuZ3RoICE9IDEgdGhlbiByZXNldCAtMVxyXG5cdGFjdGl2ZS0tXHJcblx0YmFsbCA9IGNhbmRpZGF0ZXNbMF1cclxuXHRiYWxsLmFjdGl2ZSA9IGZhbHNlXHJcblx0Y2xpY2tlZC5wdXNoIGJhbGxcclxuXHRjb25zb2xlLmxvZyBcImNsaWNrZWQubGVuZ3RoICN7Y2xpY2tlZC5sZW5ndGh9XCJcclxuXHRpZiBjbGlja2VkLmxlbmd0aCA9PSAyXHJcblx0XHRpZiBhY3RpdmUgPT0gMFxyXG5cdFx0XHRyZXNldCAxXHJcblx0XHRcdHJldHVyblxyXG5cdFx0aWYgY2xpY2tlZFswXS5jb2wgIT0gY2xpY2tlZFsxXS5jb2xcclxuXHRcdFx0cmVzZXQgLTFcclxuXHRcdGNsaWNrZWQgPSBbXVxyXG5cclxuY3JlYXRlUGFpciA9IChpKSAtPlxyXG5cdHJhZGllID0gd2luZG93V2lkdGgvNFxyXG5cdGNvbCA9IFwiI2YwMDggIzBmMDggIzAwZjggI2ZmMDhcIi5zcGxpdCAnICdcclxuXHJcblx0Zm9yIGogaW4gcmFuZ2UgMlxyXG5cdFx0YWN0aXZlKytcclxuXHRcdHggPSBpbnQgcmFuZG9tIHdpZHRoXHJcblx0XHR5ID0gaW50IHJhbmRvbSBoZWlnaHRcclxuXHRcdGJhbGxzLnB1c2ggbmV3IEJhbGwgcmFkaWUseCx5LGNvbFtpXSJdfQ==
//# sourceURL=c:\github\ColorPairCD\coffee\sketch.coffee